<section id="skills" class="py-24 bg-barca-dark relative overflow-hidden">
  <div class="absolute inset-0 overflow-hidden pointer-events-none">
    <div class="absolute w-96 h-96 bg-barca-blue/5 rounded-full blur-3xl top-1/4 left-0"></div>
    <div class="absolute w-96 h-96 bg-barca-red/5 rounded-full blur-3xl bottom-1/4 right-0"></div>
  </div>

  <div class="container mx-auto px-6 relative z-10">
    <div class="text-center mb-16" data-aos="fade-up">
      <h2 class="section-title gradient-text-hero inline-block">Mi Stack Tecnológico</h2>
      <p class="text-gray-400 text-lg mt-4 max-w-2xl mx-auto">
        Un universo de herramientas que utilizo para transformar ideas en realidad digital.
      </p>
    </div>

    <div class="flex justify-center mb-12" data-aos="fade-up">
      <div class="inline-flex bg-barca-dark border border-barca-blue/30 rounded-full p-2">
        <button *ngFor="let category of categories"
                (click)="filterSkills(category)"
                [class.active]="selectedCategory === category"
                class="filter-btn px-6 py-2 rounded-full text-sm font-medium capitalize transition-all duration-300">
          {{ category }}
        </button>
      </div>
    </div>

    <div class="grid grid-cols-1 lg:grid-cols-2 gap-16 items-center mt-20">

      <div class="relative w-full aspect-square max-w-lg mx-auto" data-aos="fade-right">
        <div class="skill-orbit-container">
          <div class="core-orbit">
             <i class="fas fa-atom text-4xl text-barca-gold"></i>
          </div>

          <div *ngFor="let skill of filteredSkills; let i = index"
               class="skill-icon-wrapper"
               [style.transform]="'rotate(' + (360 / filteredSkills.length * i) + 'deg)'">
            <div class="skill-icon"
                 (mouseenter)="setActiveSkill(skill)"
                 (mouseleave)="clearActiveSkill()"
                 [style.transform]="'rotate(' + -(360 / filteredSkills.length * i) + 'deg)'"
                 [style.animation-delay]="i * 150 + 'ms'">
              <i [class]="skill.icon + ' text-3xl'"></i>
            </div>
          </div>
        </div>
      </div>

      <div class="card-barca p-8" data-aos="fade-left">
        <div *ngIf="activeSkill; else defaultContent" class="transition-opacity duration-300">
          <div class="flex items-center gap-4 mb-4">
            <i [class]="activeSkill.icon + ' text-4xl text-barca-gold'"></i>
            <h3 class="text-3xl font-bold text-white">{{ activeSkill.name }}</h3>
          </div>
          <p class="text-gray-400 mb-6 h-12">{{ activeSkill.description }}</p>

          <div class="w-full h-3 bg-barca-dark rounded-full overflow-hidden">
            <div class="h-full rounded-full transition-all duration-500 ease-out"
                 [style.width.%]="activeSkill.level"
                 [class]="getProgressBarClass(activeSkill.level)">
              <div class="absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent animate-shine"></div>
            </div>
          </div>
          <p class="text-right mt-2 font-semibold text-barca-gold">{{ activeSkill.level }}% Dominio</p>
        </div>

        <ng-template #defaultContent>
          <div class="text-center transition-opacity duration-300 h-[156px] flex flex-col justify-center items-center">
            <i class="fas fa-hand-pointer text-4xl text-barca-blue mb-4"></i>
            <h4 class="text-xl font-semibold text-white">Interactúa conmigo</h4>
            <p class="text-gray-400">Pasa el cursor sobre una habilidad para ver los detalles.</p>
          </div>
        </ng-template>

        <hr class="border-barca-blue/20 my-8">

        <div class="grid grid-cols-2 md:grid-cols-4 gap-4 text-center">
          <div>
            <p class="text-2xl font-bold text-barca-gold">{{ stats.linesOfCode }}</p>
            <p class="text-gray-400 text-xs">Líneas de Código</p>
          </div>
          <div>
            <p class="text-2xl font-bold text-barca-gold">{{ stats.projects }}+</p>
            <p class="text-gray-400 text-xs">Proyectos</p>
          </div>
          <div>
            <p class="text-2xl font-bold text-barca-gold">{{ stats.clients }}+</p>
            <p class="text-gray-400 text-xs">Clientes</p>
          </div>
          <div>
            <p class="text-2xl font-bold text-barca-gold">{{ stats.awards }}</p>
            <p class="text-gray-400 text-xs">Premios</p>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>